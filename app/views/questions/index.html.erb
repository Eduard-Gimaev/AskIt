<%= provide :page_title, 'Questions' %>

<%= currently_at 'Questions' %>
<%= paginate(@questions) if @questions.total_pages > 1 %>

<% @questions.each do |question| %>
  <article class="card mt-3">
    <div class="card-body">
      <h4><%= question.title %></h4>
      <section class="card-text">
        <time class="text-muted" datetime="<%= question.created_at.iso8601 %>">
          <small><%= question.created_at.strftime('%Y-%m-%d %H:%M:%S') %></small>
        </time>
        <p class="my-2">
          <%= truncate(question.body, length: 100) %>
          <hr>
          </p>
        <% if question.answers.any? %>
          <% question.answers.each do |answer| %>
            <div class="my-2 text-muted small">
              <%= truncate(answer.body, length: 100) %>
            </div>
          <% end %>
        <% end %>
        </p>
      </section>
      <div class="d-flex justify-content-left">
        <%= link_to 'Show', question_path(question), class: "btn btn-primary btn-sm mx-1" %>
        <%= link_to 'Edit', edit_question_path(question), class: "btn btn-warning btn-sm mx-1" %>
        <%= button_to 'Delete', question_path(question), method: :delete, data: { turbo_confirm: 'Are you sure?', turbo_method: :delete}, class: "btn btn-danger btn-sm mx-1" %>      
      </div>
  </article>
<% end %>
<%= paginate(@questions) if @questions.total_pages > 1 %>